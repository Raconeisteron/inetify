#summary Set up Continuous Integration with Jenkins, FindBugs and Emma

= Introduction =

If you have an Android app project along with its test project in Eclipse and you would like to use Jenkins for Continuous Integration and have FindBugs and Emma coverage trends - this is how I got it to work.

= Assumptions =

You have a "standard" Android app and test project in Eclipse. For this document, let's assume the app project is called "linus-app" with API Level 7 (2.1-update1) and the test project "linus-test", and that your Android SDK is installed in "/data/android-sdk".

= Set up Ant =

  * Install Ant if you don't have it already
  * In your Eclipse workspace, run the following command to set up Ant for the app project:
{{{
android update project -p linus-app
}}}
  * Then run this command to set up Ant for the test project. Note that the path given to -m must be the relative path to the project under test, seen from the test project, not the workspace:
{{{
android update test-project -m ../linus-app -p linus-test
}}}
  * Refresh the projects in Eclipse
  * Note: The file "local.properties" contains local configuration, like the location where your Android SDK is installed. Since this location can be different on i.e. Jenkins build machines, this file should *not* be checked in to version control. So I recommend to add "local.properties" to the "Ignored Resources" in Eclipse right away.
  * Test if you can build the app project with
{{{
ant clean compile
}}}
  * Make sure that you have a (virtual) device (only one at a time!) running, and see if you can build the test project and run the tests:
{{{
ant clean coverage
}}}
  * This will take a bit longer. Eventually, you should find a "coverage.html" in the a "coverage" subfolder in your test project, showing the test coverage. You might want to add the "coverage" folder to the version control "Ignored Resources" as well.

= Emma =

If you want to build your projects in Jenkins and use the Emma plugin to see the test coverage and trend, you cannot use the "coverage.html" file as it currently is generated by the "coverage" Ant task and you have to change it to create a "coverage.xml" instead:

  * 


